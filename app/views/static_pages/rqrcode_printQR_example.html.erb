<!DOCTYPE html>

<html>
  <head>
    <% provide(:title, 'Tag It!') %>
    <title>estiquetAR |  <%= yield(:title) %></title>
  </head>
  <body>
     <h1>Personalize, group and print your TAGS</h1>
  </body>

  <div class="center hero-unit">
  <h2>
   This is the page where you create your qr codes.
  </h2>

  <%= link_to "Sign up now!", signup_path, class: "btn btn-large btn-primary" %>
</div>

 
 <% provide(:title, @qr) %>
<div class="row">
<style type="text/css">
 table {
  border-width: 0;
  border-style: none;
  border-color: #0000ff;
  border-collapse: collapse;
 }
 td {
   border-width: 0;
   border-style: none;
   border-color: #0000ff;
   border-collapse: collapse;
   padding: 0;
   margin: 0;
   width: 10px;
   height: 10px;
 }
 td.black { background-color: #000; }
 td.white { background-color: #fff; }
</style>
 
<table>
 <% @qr.modules.each_index do |x| -%>
   <tr>
   <% @qr.modules.each_index do |y| -%>
    <% if @qr.dark?(x,y) -%>
    <td class="black"/>
    <% else -%>
    <td class="white"/>
    <% end -%>
   <% end -%>
   </tr>
 <% end -%>
</div>

</html>

EXAMPLES HOW TO GET THE IMAGE FROM THE CHART.
Net::HTTP.start("#{DOMAIN_URL}") { |http|
        resp = http.get(PARAMS)
        open( "#{OUTPUT_DIR}/#{file_name}.png", 'wb' ) { |file|
          file.write(resp.body)
        }
}

Where DOMAIN_URL: http://chart.apis.google.com
PARAMS: 
/chart?cht=bvg&chbh=a&chd=s:vttusty&chs=500x300&chxt=x,y&chxl=0:|Sun|Mon|Tue|Wed|Thu|Fri|Sat|1:|0|2|4|6|8|10|12
